@property( crystal_gui && crystal_text )

@piece( custom_ps_uniformDeclaration )
	uniform samplerBuffer glyphAtlas;
@end

@piece( custom_ps_preLights )
	outColour = texelFetch( glyphAtlas, int( inPs.glyphOffsetStart +
											 uint(floor(inPs.uv0.y) * float(inPs.pixelsPerRow) +
											 floor(inPs.uv0.x)) ) );
	@property( hlms_colour )outColour *= inPs.colour @insertpiece( MultiplyDiffuseConst );@end
	@property( !hlms_colour && diffuse )outColour *= material.diffuse;@end
@end

@end
